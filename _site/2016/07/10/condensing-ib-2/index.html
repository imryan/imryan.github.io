<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Writing D.R.Y. Code with IBOutletCollection</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,600">
  <link rel="stylesheet" href="/style.css">
  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Ryan Cohen" href="/feed.xml" />
  <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Writing D.R.Y. Code with IBOutletCollection - Ryan Cohen</title>
<meta property="og:title" content="Writing D.R.Y. Code with IBOutletCollection" />
<meta name="description" content="When working with multiple IBOutlets or IBActions that share similar attributes or events, I’ve noticed a common trend that looks something like this:" />
<meta property="og:description" content="When working with multiple IBOutlets or IBActions that share similar attributes or events, I’ve noticed a common trend that looks something like this:" />
<link rel="canonical" href="//deadryan.xyz/2016/07/10/condensing-ib-2/" />
<meta property="og:url" content="//deadryan.xyz/2016/07/10/condensing-ib-2/" />
<meta property="og:site_name" content="Ryan Cohen" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-07-10T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ryancohen" />
<meta name="twitter:creator" content="@Ryan Cohen" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Writing D.R.Y. Code with IBOutletCollection",
    "datePublished": "2016-07-10T00:00:00-04:00",
    "description": "When working with multiple IBOutlets or IBActions that share similar attributes or events, I’ve noticed a common trend that looks something like this:",
    "url": "//deadryan.xyz/2016/07/10/condensing-ib-2/"
  }
</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
  <div class="container">
    <header class="masthead">
  <h1 class="masthead-title--small">
    <a href="/">Ryan Cohen</a>
  </h1>
</header>
<div class="content post">
  <h1 class="post-title">Writing D.R.Y. Code with IBOutletCollection</h1>
  <div class="post-date">
    <time>10 Jul 2016</time>
  </div>
  <p>When working with multiple <code class="highlighter-rouge">IBOutlets</code> or <code class="highlighter-rouge">IBActions</code> that share similar attributes or events, I’ve noticed a common trend that looks something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">UIButton</span> <span class="o">*</span><span class="n">tile1</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">UIButton</span> <span class="o">*</span><span class="n">tile2</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">UIButton</span> <span class="o">*</span><span class="n">tile3</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">UIButton</span> <span class="o">*</span><span class="n">tile4</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nf">selectedTile1</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nf">selectedTile2</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nf">selectedTile3</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nf">selectedTile4</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
</code></pre>
</div>

<p>This tends to create a sense of redundancy and puts in the grave the idea of D.R.Y. (don’t repeat yourself). You’ll be able to call yourself out on this once you start seeing that variable names take on an incrementing value at the end. We could take the aforementioned chunk of outlet and action declarations and convert them into something like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">IBOutletCollection</span><span class="p">(</span><span class="n">UIButton</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">tiles</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nf">selectedTile</span><span class="p">:(</span><span class="n">UIButton</span> <span class="o">*</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
</code></pre>
</div>
<p>For this example, we’ll be building the start of a simplified version of the game <a href="http://bit.ly/29r8TMZ">Simon.</a> Also, it may be important to note that I’ve changed the <code class="highlighter-rouge">sender</code> argument on our <code class="highlighter-rouge">IBAction</code> method to readily accept a <code class="highlighter-rouge">UIButton</code> parameter. This just makes things a bit easier since we know for a fact we’ll be receiving a <code class="highlighter-rouge">UIButton</code> type, so there’s no need for type <code class="highlighter-rouge">id</code>. In which case we’d have to cast that to a button before use of the button’s attributes.</p>

<p>Next, we would then connect each tile button in our Storyboard just as we would any other outlet:</p>

<p><img src="//deadryan.xyz/assets/img/flatiron/collections/collection-outlets.png" alt="" /></p>

<p>We can see that each tile is connected to our outlet collection.</p>

<p><img src="//deadryan.xyz/assets/img/flatiron/collections/tile-outlets.png" alt="" /></p>

<p>And we’d do just the same for our actions:</p>

<p><img src="//deadryan.xyz/assets/img/flatiron/collections/actions.png" alt="" /></p>

<p>So, all together our view should look something like this:</p>

<p><img src="//deadryan.xyz/assets/img/flatiron/collections/view.png" alt="" /></p>

<p>Now it’s time to make it work. First, let’s write a helper method that can take in a <code class="highlighter-rouge">UIColor</code> parameter and return its name as a <code class="highlighter-rouge">NSString</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- (NSString *)stringFromUIColor:(UIColor *)color {
    NSString *string = @"";
    
    if (CGColorEqualToColor(color.CGColor, [UIColor flatRedColor].CGColor)) {
        string = @"Red";
        
    } else if (CGColorEqualToColor(color.CGColor, [UIColor flatGreenColorDark].CGColor)) {
        string = @"Green";
        
    } else if (CGColorEqualToColor(color.CGColor, [UIColor flatYellowColor].CGColor)) {
        string = @"Yellow";
        
    } else if (CGColorEqualToColor(color.CGColor, [UIColor flatBlueColor].CGColor)) {
        string = @"Blue";
    }
    
    return string;
}
</code></pre>
</div>

<p>Note: I’m using a library called <a href="https://github.com/ViccAlexander/Chameleon">Chameleon</a> that has an awesome collection of super nice colors. Once you go Chameleon you never go back.</p>

<p>Let’s write the implementation for our action, which is called when any of the connected buttons are pressed. They are then passed in as the <code class="highlighter-rouge">UIButton</code> argument, giving us access to its instance and retirement funds.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- (IBAction)selectedTile:(UIButton *)sender {
    NSString *colorName = [self stringFromUIColor:sender.backgroundColor];
    NSString *selectedText = [NSString stringWithFormat:@"Selected the %@ tile!", colorName];
    
    self.selectedTileLabel.text = selectedText;
}
</code></pre>
</div>

<p>Note in the above screenshot that I’ve also created a <code class="highlighter-rouge">UILabel</code> to be updated each time a button is pressed to let us know which color has been selected.</p>

<p>Lastly, to avoid the issue of comparing <code class="highlighter-rouge">UIColor</code> which is sort of <a href="http://stackoverflow.com/a/21622229/6030938">difficult,</a> I also utilize the <code class="highlighter-rouge">tile</code> outlets to explicitly assign them colors on the view’s initial load.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>NSArray *colors = @[ [UIColor flatRedColor], [UIColor flatGreenColorDark],
                     [UIColor flatYellowColor], [UIColor flatBlueColor]
                   ];
    
    for (NSUInteger i = 0; i &lt; self.tiles.count; i++) {
        UIButton *tile = self.tiles[i];
        tile.backgroundColor = colors[i];
    }
</code></pre>
</div>

<p>In the <code class="highlighter-rouge">for</code> loop, I iterate over all the connected <code class="highlighter-rouge">UIButton</code>s and assign their <code class="highlighter-rouge">backgroundColor</code> property. This is a great example on how outlet connections can be used to condense code when your elements have most things in common. Without a collection, you’d have to go one-by-one and assign values to each button. This comes in handy especially when assigning multiple qualities to buttons since you can treat one button as though it were all of them. The power of the loop!</p>

<p>Also it is important to keep in mind that <code class="highlighter-rouge">IBOutletCollection</code> doesn’t guarantee the order of objects inside of its array, especially across Xcode projects.</p>

<p>Without further ado here is our somewhat-complete game of Simon:</p>

<p><img src="//deadryan.xyz/assets/img/flatiron/collections/colors.gif" alt="" /></p>

</div>

  </div>
</body>
</html>
